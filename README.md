# Movie REST API

[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.x-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Security](https://img.shields.io/badge/Spring-Security-yellow.svg)](https://spring.io/projects/spring-security)
[![PostgreSQL](https://img.shields.io/badge/Database-PostgreSQL-blue.svg)](https://www.postgresql.org/)
[![JWT](https://img.shields.io/badge/Auth-JWT-orange.svg)](https://jwt.io/)
[![OpenAPI](https://img.shields.io/badge/Docs-OpenAPI-green.svg)](https://swagger.io/specification/)

REST API приложение для управления фильмами с продвинутой системой авторизации и кэшированием.

## Возможности

### Базовый функционал
- **REST API** для управления фильмами и пользователями
- **JWT аутентификация** с разделением ролей
- **Кэширование** через Caffeine для повышения производительности
- **Динамическая фильтрация** с помощью Specification API
- **PostgreSQL** как основная база данных
- **OpenAPI документация** с Swagger UI

## Авторизация и безопасность

### Реализована авторизация через JWT token с разделениями по правам USER, ADMIN

#### Права пользователя без авторизации:
- **Регистрация** нового аккаунта
- **Получение списка всех фильмов** с базовой информацией

#### Права USER:
- **Просмотр информации о фильме** (полные детали)
- **Добавление отзывов и лайков** (только от своего имени)
- **Изменение информации о себе** (профиль, настройки)
- **Удаление своего профиля** (полное удаление аккаунта)
- **Удаление/добавление в друзья** других пользователей

#### Дополнительные права ADMIN:
- **Добавление/изменение/удаление фильмов** (полный CRUD)
- **Изменение/удаление других пользователей** (модерация)
- **Получение/удаление прав администратора** (управление ролями)

## Особенности бизнес-логики

### Система ролей
- **По умолчанию** все пользователи регистрируются как `USER`
- **Права `ADMIN`** может выдать только существующий администратор
- **Иерархическая система** доступа к endpoints

### Система рейтингов и отзывов
- **Автоматический пересчет рейтинга** фильма при добавлении/изменении отзыва
- **Динамическое обновление** средней оценки в реальном времени
- **Валидация данных** при добавлении оценок (1-10 баллов)

### Ограничения и валидация
- **Один пользователь = один отзыв/лайк** на фильм (уникальность)
- **Владелец контента** может редактировать/удалять только свой контент
- **Проверка прав доступа** перед выполнением операций